<!DOCTYPE html>
<html>
<head>
    <title>Simple BroadcastChannel Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; font-size: 16px; }
        #log { background: #f0f0f0; padding: 10px; height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Simple BroadcastChannel Test</h1>
    <p>Open this page in multiple tabs to test cross-tab communication.</p>
    
    <button onclick="sendTest()">Send Test Message</button>
    <button onclick="clearLog()">Clear Log</button>
    
    <h3>Message Log:</h3>
    <div id="log"></div>

    <script>
        const channel = new BroadcastChannel('simple-test');
        const log = document.getElementById('log');
        
        function addLog(message) {
            const time = new Date().toLocaleTimeString();
            log.innerHTML += `<div>[${time}] ${message}</div>`;
            log.scrollTop = log.scrollHeight;
            console.log('[BroadcastTest]', message);
        }
        
        // Listen for messages
        channel.onmessage = (event) => {
            addLog(`ðŸ“¨ RECEIVED: ${event.data.message} (from ${event.data.sender})`);
        };
        
        // Send test message
        function sendTest() {
            const message = {
                message: 'Hello from tab!',
                sender: 'Tab-' + Math.random().toString(36).substr(2, 4),
                timestamp: Date.now()
            };
            
            channel.postMessage(message);
            addLog(`ðŸ“¤ SENT: ${message.message} (as ${message.sender})`);
        }
        
        function clearLog() {
            log.innerHTML = '';
        }
        
        addLog('âœ… BroadcastChannel initialized on channel: simple-test');
        addLog('ðŸ”„ Ready to test cross-tab communication');
    </script>
</body>
</html>

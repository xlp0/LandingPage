services:
  landingpage:
    build: .
    container_name: landingpage-local
    restart: unless-stopped
    ports:
      - "8765:3000"  # Unified HTTP + WebSocket server
    environment:
      - NODE_ENV=production
      - PORT=3000
      # WebSocket URL - set this for production deployments
      # Examples:
      # - WEBSOCKET_URL=wss://dev.pkc.pub/ws/
      # - WEBSOCKET_URL=wss://pkc.pub/ws/
      # For local network testing (same WiFi):
      - WEBSOCKET_URL=wss://henry.pkc.pub/ws/
      # STUN Servers - comma-separated list of STUN server URLs
      # Examples:
      # - STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302
      # - STUN_SERVERS=stun:your-server.com:3478
      # - STUN_SERVERS=stun:192.168.1.149:7302
      # For local network testing:
      - STUN_SERVERS=stun:stun.l.google.com:19302
    volumes:
      - ./.env:/app/.env  # Mount .env file for runtime access (if exists)
    networks:
      - landingpage-network

networks:
  landingpage-network:
    driver: bridge

chapter:
  id: "network_receive"
  title: "MCard Receiver"

clm:
  abstract:
    concept: "Receive MCards"
    manifestation: "HTTP Listener Configuration"

  concrete:
    runtime: javascript
    code: |
      // MCard receive configuration validator
      function prepareReceiver(ctx) {
        const port = ctx.port || 3002;
        const path = ctx.path || '/receive';
        return {
          ready: true,
          listen_port: port,
          listen_path: path,
          endpoint: 'http://localhost:' + port + path
        };
      }
      const ctx = typeof target === 'object' ? target : {};
      const result = prepareReceiver(ctx);
      result;

  balanced:
    description: "Prepares MCard receiver configuration"
    test_cases:
      - given: "Configure receiver"
        when:
          port: 3002
        then:
          ready: true

examples:
  - name: "Configure MCard receiver"
    input:
      port: 3002
      path: "/receive"
    expected_output:
      ready: true
      listen_port: 3002
      listen_path: "/receive"
      endpoint: "http://localhost:3002/receive"

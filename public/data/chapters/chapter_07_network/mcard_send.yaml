chapter:
  id: "network_send"
  title: "MCard Sender"

clm:
  abstract:
    concept: "Send MCard"
    manifestation: "HTTP Sender Configuration"

  concrete:
    runtime: javascript
    code: |
      // MCard send configuration validator
      function prepareMCardSend(ctx) {
        const url = ctx.url || 'http://localhost:3002/receive';
        const hash = ctx.hash || 'default_hash';
        return {
          ready: true,
          target_url: url,
          mcard_hash: hash,
          method: 'POST'
        };
      }
      const ctx = typeof target === 'object' ? target : {};
      const result = prepareMCardSend(ctx);
      result;

  balanced:
    description: "Prepares MCard for sending over network"
    test_cases:
      - given: "Prepare send"
        when:
          hash: "abc123"
        then:
          ready: true

examples:
  - name: "Prepare MCard for sending"
    input:
      url: "http://localhost:3002/receive"
      hash: "abc123def456"
    expected_output:
      ready: true
      target_url: "http://localhost:3002/receive"
      mcard_hash: "abc123def456"
      method: "POST"

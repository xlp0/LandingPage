# =============================================================================
# EXCLUDED FROM AUTOMATED TESTS
# =============================================================================
# This file is prefixed with underscore (_) to exclude it from automated CLM tests.
# It recursively loads ALL files from the root directory, which takes ~5 minutes.
#
# To run manually:
#   uv run python -m mcard.ptr.cli run chapters/chapter_04_load_dir/_load_root.yaml
#
# Results are persisted to: data/root_loader.db
# =============================================================================

chapter:
  id: 4.3
  title: "Filesystem Loader - Root Directory"
  mvp_card: "Root Loader"
  pkc_task: "Load Root Files"

clm:
  abstract:
    purpose: "Load all files from the root directory and measure metrics."
    inputs:
      source_dir: { type: "string" }
      db_path: { type: "string" }
    outputs:
      metrics: { type: "object" }

  concrete:
    runtime: "python"
    entry_point: "run_benchmark"
    builtin: "loader"
    input_type: "directory"
    process_type: "load_files"
    output_type: "metrics"
    implementation:
      inputs:
        source_dir: "string"
        db_path: "string"

  balanced:
    input_arguments:
      source_dir: "."
      db_path: "data/root_loader.db"
    test_cases:
      - description: "Load root directory files recursively"
        given: "Root directory"
        when:
          params:
            source_dir: "."
            recursive: true
            db_path: "data/root_loader.db"
        then:
          success: true


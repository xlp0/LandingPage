
version: "1.0"
chapter:
  id: 8
  title: P2P
clm:
  abstract:
    concept: PeerSync
    description: Connect and Sync with Peer
  concrete:
    manifestation: WebRTC Sync Initiator
    description: Uses webrtc_connect builtin to sync
    boundary: extrinsic
    builtin: webrtc_connect
    runtime: network
    code_file: ./p2p_sync_logic.js
    config:
      signaling_url: "mock://p2p"  # Use mock for standalone
      peer_id: "syncer_01"
      target_peer_id: "listener_01"
      channel_label: "mcard-sync"
      # IMPORTANT: If we want to reference context vars in the config, 
      # we need to ensure the Input passed to executeCLM contains them.
      # OR we hardcode them here for simplicity in this demo structure.
      # The previous error was due to malformed YAML structure (missing clm.concrete).
      message: 
        type: "sync_manifest"
        hashes: ["hash_A", "hash_B"]
      timeout: 2000
  balanced:
    expectation: Sync initiated
    description: Returns connection status

examples:
  - name: "Sync"
    input: {}

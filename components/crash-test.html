<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crash Test Component</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: monospace;
      background: #e74c3c;
      color: white;
      text-align: center;
    }
    .crash-panel {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    h3 {
      margin: 0 0 15px 0;
    }
    .warning {
      background: rgba(255, 255, 255, 0.2);
      padding: 10px;
      border-radius: 4px;
      margin: 15px 0;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <div class="crash-panel">
    <h3>⚠️ Crash Test Component</h3>
    <p>This component will crash automatically.</p>
    <div class="warning">
      ⚡ This component is intentionally broken to demonstrate iframe isolation.
      The rest of the page will continue to work normally.
    </div>
  </div>

  <script>
    console.log('[Crash Test Component] Loaded - Will crash immediately!');

    // REAL CRASH: Immediately access undefined property
    // This will cause an uncaught error and stop all script execution
    const brokenObject = null;
    
    // This line will crash the entire component
    const result = brokenObject.someProperty.deepProperty.value;
    
    // Everything below this line will NEVER execute
    console.log('This will never print');
    
    // Heartbeat will never be sent because the script crashed
    setInterval(() => {
      window.parent.postMessage({
        type: 'clm_heartbeat',
        componentId: 'crash-test',
        timestamp: Date.now()
      }, '*');
    }, 3000);
  </script>
</body>
</html>